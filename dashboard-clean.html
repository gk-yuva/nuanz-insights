<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Portfolio Analytics</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f0f23, #1a1a2e, #16213e);
      color: #ffffff;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    /* Header */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 215, 0, 0.3);
      box-shadow: 0 4px 20px rgba(255, 215, 0, 0.1);
    }

    .header h1 {
      font-size: 28px;
      background: linear-gradient(135deg, #ffd700, #ffb347, #ffa500);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);
    }

    .header-stats {
      display: flex;
      gap: 30px;
      align-items: center;
    }

    .header-stat {
      text-align: center;
    }

    .header-stat .value {
      font-size: 24px;
      font-weight: 700;
      color: #ffd700;
      text-shadow: 0 2px 10px rgba(255, 215, 0, 0.4);
    }

    .header-stat .label {
      font-size: 12px;
      color: #c0c0c0;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Dashboard Grid */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(2, 300px);
      gap: 20px;
      margin-bottom: 20px;
      position: relative;
      z-index: 1;
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Widget Styles */
    .widget {
      background: rgba(0, 0, 0, 0.95);
      border-radius: 15px;
      padding: 20px;
      border: 1px solid rgba(255, 215, 0, 0.3);
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
      z-index: 2;
      min-height: 200px;
    }

    .widget-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(255, 215, 0, 0.3);
    }

    .widget-title {
      font-size: 16px;
      font-weight: 600;
      color: #ffd700;
      text-shadow: 0 2px 10px rgba(255, 215, 0, 0.3);
    }

    /* Widget Layout - 6 widgets in 3x2 grid */
    .performance-metrics { grid-column: 1; grid-row: 1; }
    .additional-widget-1 { grid-column: 2; grid-row: 1; }
    .additional-widget-2 { grid-column: 3; grid-row: 1; }
    .main-chart { grid-column: 1; grid-row: 2; }
    .help-me-hedge { grid-column: 2; grid-row: 2; }
    .sentiment-analysis { grid-column: 3; grid-row: 2; }

    /* Performance Metrics */
    .metrics-container {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .metric-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 215, 0, 0.2);
    }

    .metric-item:last-child {
      border-bottom: none;
    }

    .metric-label {
      font-size: 12px;
      color: #c0c0c0;
    }

    .metric-value {
      font-size: 14px;
      font-weight: 600;
      color: #ffd700;
    }

    /* Data Lists */
    .data-list {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .data-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 215, 0, 0.2);
    }

    .data-item:last-child {
      border-bottom: none;
    }

    .data-label {
      font-size: 12px;
      color: #c0c0c0;
    }

    .data-value {
      font-size: 14px;
      font-weight: 600;
      color: #ffd700;
    }

    .change-positive { color: #32cd32; }
    .change-negative { color: #ff6b6b; }

    /* Help Me Hedge - Two Panel Structure */
    .hedge-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      height: 250px;
      width: 100%;
    }

    .hedge-panel {
      background: linear-gradient(135deg, rgba(25, 25, 35, 0.95), rgba(35, 35, 50, 0.95));
      border-radius: 12px;
      border: 2px solid rgba(255, 215, 0, 0.3);
      padding: 15px;
      backdrop-filter: blur(10px);
      overflow-y: auto;
    }

    .panel-header {
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(255, 215, 0, 0.3);
    }

    .panel-header h3 {
      font-size: 18px;
      color: #ffd700;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* Analysis Panel Styles */
    .analysis-section {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .analysis-item {
      background: rgba(0, 0, 0, 0.3);
      padding: 15px;
      border-radius: 10px;
      border-left: 4px solid #ffd700;
    }

    .item-title {
      font-size: 14px;
      color: #c0c0c0;
      margin-bottom: 5px;
    }

    .item-value {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .item-value.bullish { color: #00ff88; }
    .item-value.moderate { color: #ffa500; }
    .item-value.positive { color: #00ff88; }

    .item-description {
      font-size: 12px;
      color: #a0a0a0;
    }

    .analysis-metrics {
      background: rgba(0, 0, 0, 0.3);
      padding: 15px;
      border-radius: 10px;
      margin-top: 10px;
    }

    .metric-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    .metric-row:last-child {
      margin-bottom: 0;
    }

    /* Simulator Panel Styles */
    .simulator-section {
      display: flex;
      flex-direction: column;
      gap: 12px;
      height: 100%;
      min-height: 200px;
    }

    .sim-controls {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .control-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .control-group label {
      font-size: 12px;
      color: #c0c0c0;
      text-transform: uppercase;
    }

    .slider-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .hedge-slider {
      flex: 1;
      height: 6px;
      border-radius: 3px;
      background: rgba(255, 215, 0, 0.2);
      outline: none;
      -webkit-appearance: none;
    }

    .hedge-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #ffd700;
      cursor: pointer;
    }

    .slider-value {
      font-size: 14px;
      color: #ffd700;
      font-weight: bold;
      min-width: 40px;
    }

    .scenario-select {
      background: rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(255, 215, 0, 0.3);
      border-radius: 8px;
      padding: 8px 12px;
      color: #fff;
      font-size: 14px;
    }

    .sim-results {
      background: rgba(0, 0, 0, 0.3);
      padding: 12px;
      border-radius: 8px;
      border: 1px solid rgba(255, 215, 0, 0.3);
      flex-shrink: 0;
    }

    .result-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .result-item:last-child {
      margin-bottom: 0;
    }

    .result-item.highlight {
      font-weight: bold;
      border-top: 1px solid rgba(255, 215, 0, 0.3);
      padding-top: 10px;
      margin-top: 10px;
    }

    .result-label {
      font-size: 12px;
      color: #c0c0c0;
    }

    .result-value {
      font-size: 14px;
      color: #ffd700;
      font-weight: bold;
    }

    .simulate-btn {
      background: linear-gradient(135deg, #ffd700, #ffb347);
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      color: #000;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: auto;
      font-size: 14px;
      flex-shrink: 0;
    }

    .simulate-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
    }

    /* Sentiment Analysis Widget */
    .sentiment-container {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .sentiment-score {
      text-align: center;
      padding: 15px;
      background: rgba(255, 215, 0, 0.1);
      border-radius: 10px;
      border: 1px solid rgba(255, 215, 0, 0.3);
    }

    .score-value {
      font-size: 32px;
      font-weight: 700;
      color: #00ff88;
      text-shadow: 0 2px 10px rgba(0, 255, 136, 0.3);
    }

    .score-label {
      font-size: 14px;
      color: #ffd700;
      margin-top: 5px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .sentiment-details {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .sentiment-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255, 215, 0, 0.2);
    }

    .sentiment-item:last-child {
      border-bottom: none;
    }

    .sentiment-metric {
      font-size: 12px;
      color: #c0c0c0;
    }

    .sentiment-value {
      font-size: 12px;
      font-weight: 600;
    }

    .sentiment-value.positive {
      color: #00ff88;
    }

    .sentiment-value.moderate {
      color: #ffa500;
    }

    /* Portfolio Chart Styles */
    .chart-container {
      position: relative;
      height: 200px;
      width: 100%;
    }

    .chart-container canvas {
      max-width: 100%;
      max-height: 100%;
    }

    /* Animation */
    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInUp 0.6s ease forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <h1>Advanced Portfolio Analytics</h1>
    <div class="header-stats">
      <div class="header-stat">
        <div class="value">‚Çπ2.34L</div>
        <div class="label">Portfolio Value</div>
      </div>
      <div class="header-stat">
        <div class="value">+18.35%</div>
        <div class="label">Total P&L</div>
      </div>
      <div class="header-stat">
        <div class="value">‚óè LIVE DATA</div>
        <div class="label"></div>
      </div>
    </div>
  </div>

  <!-- Dashboard -->
  <div class="container">
    <div class="dashboard-grid">
      
      <!-- Performance Metrics Widget -->
      <div class="widget performance-metrics fade-in">
        <div class="widget-header">
          <div class="widget-title">Performance Metrics</div>
          <div>‚ô¶Ô∏è</div>
        </div>
        <div class="metrics-container">
          <div class="metric-item">
            <div class="metric-label">Sharpe Ratio</div>
            <div class="metric-value">1.45</div>
          </div>
          <div class="metric-item">
            <div class="metric-label">Beta</div>
            <div class="metric-value">0.87</div>
          </div>
          <div class="metric-item">
            <div class="metric-label">Alpha</div>
            <div class="metric-value change-positive">+2.3%</div>
          </div>
          <div class="metric-item">
            <div class="metric-label">Max Drawdown</div>
            <div class="metric-value change-negative">-8.2%</div>
          </div>
          <div class="metric-item">
            <div class="metric-label">Volatility</div>
            <div class="metric-value">14.6%</div>
          </div>
        </div>
      </div>

      <!-- Market Overview Widget -->
      <div class="widget additional-widget-1 fade-in">
        <div class="widget-header">
          <div class="widget-title">Market Overview</div>
          <div>üìä</div>
        </div>
        <ul class="data-list">
          <li class="data-item">
            <span class="data-label">NIFTY 50</span>
            <span class="data-value change-positive">+0.8%</span>
          </li>
          <li class="data-item">
            <span class="data-label">SENSEX</span>
            <span class="data-value change-positive">+1.2%</span>
          </li>
          <li class="data-item">
            <span class="data-label">VIX</span>
            <span class="data-value change-negative">-2.1%</span>
          </li>
          <li class="data-item">
            <span class="data-label">USD/INR</span>
            <span class="data-value">‚Çπ84.12</span>
          </li>
        </ul>
      </div>

      <!-- Top Holdings Widget -->
      <div class="widget additional-widget-2 fade-in">
        <div class="widget-header">
          <div class="widget-title">Top Holdings</div>
          <div>üíº</div>
        </div>
        <ul class="data-list">
          <li class="data-item">
            <span class="data-label">GOLD1</span>
            <span class="data-value">32.4%</span>
          </li>
          <li class="data-item">
            <span class="data-label">ALUMINUM</span>
            <span class="data-value">28.7%</span>
          </li>
          <li class="data-item">
            <span class="data-label">ENERGY</span>
            <span class="data-value">24.8%</span>
          </li>
          <li class="data-item">
            <span class="data-label">OIL</span>
            <span class="data-value">14.1%</span>
          </li>
        </ul>
      </div>

      <!-- Portfolio Performance Visualization -->
      <div class="widget main-chart fade-in">
        <div class="widget-header">
          <div class="widget-title">Portfolio Performance Visualization</div>
        </div>
        <div class="chart-container">
          <canvas id="performance-chart" width="400" height="200"></canvas>
        </div>
      </div>

      <!-- Help Me Hedge Widget -->
      <div class="widget help-me-hedge fade-in">
        <div class="widget-header">
          <div class="widget-title">üõ°Ô∏è Help Me Hedge</div>
        </div>
        
        <div class="hedge-container">
          <!-- Analysis Panel -->
          <div class="hedge-panel analysis-panel">
            <div class="panel-header">
              <h3>üìä Analysis</h3>
            </div>
            <div class="panel-content">
              <div class="analysis-section">
                <div class="analysis-item">
                  <div class="item-title">Market Condition</div>
                  <div class="item-value bullish">Moderately Bullish</div>
                  <div class="item-description">Markets showing upward momentum</div>
                </div>
                
                <div class="analysis-item">
                  <div class="item-title">Portfolio Risk</div>
                  <div class="item-value moderate">Medium Risk</div>
                  <div class="item-description">Beta: 0.87 | VaR: -4.2%</div>
                </div>
                
                <div class="analysis-item">
                  <div class="item-title">Hedge Recommendation</div>
                  <div class="item-value positive">Partial Hedge</div>
                  <div class="item-description">Hedge 30-40% of portfolio exposure</div>
                </div>
                
                <div class="analysis-metrics">
                  <div class="metric-row">
                    <span class="metric-label">VIX Level</span>
                    <span class="metric-value">18.5</span>
                  </div>
                  <div class="metric-row">
                    <span class="metric-label">Correlation</span>
                    <span class="metric-value">0.73</span>
                  </div>
                  <div class="metric-row">
                    <span class="metric-label">Hedge Efficiency</span>
                    <span class="metric-value">85%</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Simulator Panel -->
          <div class="hedge-panel simulator-panel">
            <div class="panel-header">
              <h3>‚ö° Simulator</h3>
            </div>
            <div class="panel-content">
              <div class="simulator-section">
                <div class="sim-controls">
                  <div class="control-group">
                    <label>Hedge Ratio</label>
                    <div class="slider-container">
                      <input type="range" id="hedge-ratio" min="0" max="100" value="35" class="hedge-slider">
                      <span class="slider-value">35%</span>
                    </div>
                  </div>
                  
                  <div class="control-group">
                    <label>Market Scenario</label>
                    <select id="market-scenario" class="scenario-select">
                      <option value="bullish">Bullish (+15%)</option>
                      <option value="neutral" selected>Neutral (0%)</option>
                      <option value="bearish">Bearish (-20%)</option>
                      <option value="crash">Market Crash (-40%)</option>
                    </select>
                  </div>
                </div>
                
                <div class="sim-results">
                  <div class="result-item">
                    <span class="result-label">Unhedged P&L</span>
                    <span class="result-value" id="unhedged-pnl">‚Çπ0</span>
                  </div>
                  <div class="result-item">
                    <span class="result-label">Hedged P&L</span>
                    <span class="result-value" id="hedged-pnl">‚Çπ0</span>
                  </div>
                  <div class="result-item highlight">
                    <span class="result-label">Protection</span>
                    <span class="result-value" id="protection-amount">‚Çπ0</span>
                  </div>
                </div>
                
                <button class="simulate-btn" onclick="runHedgeSimulation()">Run Simulation</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- AI Sentiment Analysis Widget -->
      <div class="widget sentiment-analysis fade-in">
        <div class="widget-header">
          <div class="widget-title">Overall Sentiment</div>
          <div>ü§ñ</div>
        </div>
        <div class="sentiment-container">
          <div class="sentiment-score">
            <div class="score-value">78%</div>
            <div class="score-label">Bullish</div>
          </div>
          <div class="sentiment-details">
            <div class="sentiment-item">
              <span class="sentiment-metric">Market Confidence</span>
              <span class="sentiment-value positive">High</span>
            </div>
            <div class="sentiment-item">
              <span class="sentiment-metric">News Sentiment</span>
              <span class="sentiment-value positive">+76%</span>
            </div>
            <div class="sentiment-item">
              <span class="sentiment-metric">Social Trends</span>
              <span class="sentiment-value moderate">Moderate</span>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    console.log('üöÄ Advanced Dashboard Loading...');
    
    // Hedge Simulator Functions
    function runHedgeSimulation() {
      const hedgeRatio = document.getElementById('hedge-ratio').value / 100;
      const scenario = document.getElementById('market-scenario').value;
      
      // Portfolio base value
      const portfolioValue = 250000;
      
      // Market scenarios
      const scenarios = {
        bullish: 0.15,
        neutral: 0.00,
        bearish: -0.20,
        crash: -0.40
      };
      
      const marketMove = scenarios[scenario];
      
      // Calculate unhedged P&L
      const unhedgedPnL = portfolioValue * marketMove;
      
      // Calculate hedged P&L (assuming hedge instrument moves opposite to market)
      const hedgeProtection = Math.abs(marketMove) * hedgeRatio * portfolioValue * 0.85; // 85% hedge efficiency
      const hedgeCost = portfolioValue * hedgeRatio * 0.02; // 2% premium cost
      const hedgedPnL = unhedgedPnL + (marketMove < 0 ? hedgeProtection : -hedgeProtection) - hedgeCost;
      
      // Calculate protection amount
      const protectionAmount = Math.max(0, unhedgedPnL - hedgedPnL);
      
      // Update display
      document.getElementById('unhedged-pnl').textContent = formatCurrency(unhedgedPnL);
      document.getElementById('hedged-pnl').textContent = formatCurrency(hedgedPnL);
      document.getElementById('protection-amount').textContent = formatCurrency(protectionAmount);
      
      // Update colors based on values
      updatePnLColors('unhedged-pnl', unhedgedPnL);
      updatePnLColors('hedged-pnl', hedgedPnL);
    }
    
    function formatCurrency(amount) {
      const absAmount = Math.abs(amount);
      const sign = amount >= 0 ? '' : '-';
      
      if (absAmount >= 100000) {
        return `${sign}‚Çπ${(absAmount / 100000).toFixed(1)}L`;
      } else if (absAmount >= 1000) {
        return `${sign}‚Çπ${(absAmount / 1000).toFixed(0)}K`;
      } else {
        return `${sign}‚Çπ${absAmount.toFixed(0)}`;
      }
    }
    
    function updatePnLColors(elementId, value) {
      const element = document.getElementById(elementId);
      if (element) {
        if (value > 0) {
          element.style.color = '#00ff88';
        } else if (value < 0) {
          element.style.color = '#ff4757';
        } else {
          element.style.color = '#ffd700';
        }
      }
    }
    
    function initializeHedgeSimulator() {
      // Update hedge ratio display when slider changes
      const hedgeSlider = document.getElementById('hedge-ratio');
      const sliderValue = document.querySelector('.slider-value');
      const scenarioSelect = document.getElementById('market-scenario');
      
      if (hedgeSlider && sliderValue) {
        hedgeSlider.addEventListener('input', function() {
          sliderValue.textContent = this.value + '%';
          runHedgeSimulation(); // Auto-run simulation on slider change
        });
      }
      
      // Auto-run simulation when scenario changes
      if (scenarioSelect) {
        scenarioSelect.addEventListener('change', function() {
          runHedgeSimulation();
        });
      }
      
      // Run initial simulation
      setTimeout(() => {
        runHedgeSimulation();
      }, 500);
    }

    // Simple chart initialization
    function initializeChart() {
      const canvas = document.getElementById('performance-chart');
      if (!canvas) return;
      
      const ctx = canvas.getContext('2d');
      const width = canvas.width;
      const height = canvas.height;
      
      // Clear canvas
      ctx.clearRect(0, 0, width, height);
      
      // Draw simple performance line
      ctx.strokeStyle = '#ffd700';
      ctx.lineWidth = 2;
      ctx.beginPath();
      
      // Mock data points for demonstration
      const points = [
        {x: 50, y: 150},
        {x: 100, y: 140},
        {x: 150, y: 120},
        {x: 200, y: 100},
        {x: 250, y: 80},
        {x: 300, y: 60},
        {x: 350, y: 50}
      ];
      
      ctx.moveTo(points[0].x, points[0].y);
      for (let i = 1; i < points.length; i++) {
        ctx.lineTo(points[i].x, points[i].y);
      }
      ctx.stroke();
      
      // Add labels
      ctx.fillStyle = '#c0c0c0';
      ctx.font = '12px Arial';
      ctx.fillText('Portfolio Growth', 10, 20);
      ctx.fillText('+18.35%', 300, 40);
    }
    
    // Initialize everything
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üé® Initializing Advanced Dashboard...');
      
      // Add fade-in animation delays
      document.querySelectorAll('.fade-in').forEach((el, index) => {
        el.style.animationDelay = (index * 0.1) + 's';
      });
      
      // Initialize components
      setTimeout(() => {
        try {
          initializeChart();
          initializeHedgeSimulator();
          
          console.log('‚úÖ Dashboard initialized successfully');
        } catch (error) {
          console.error('‚ùå Error initializing dashboard:', error);
        }
      }, 500);
    });
    
    console.log('üöÄ Advanced Dashboard Script Loaded');
  </script>
</body>
</html>